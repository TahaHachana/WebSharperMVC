(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;$.Define($$,{Sitelet:{Login:{Client:{form:function(w){return c.Render(function(x){return function(y){return function(z){return f.loginRender(x,y,z);};};},c.Run(function(A){return g.Start(g.Delay(function(){h.Log(A);return g.Bind(i.Async("Sitelet:0",[A]),function(C){if(C.$==1){j.location.assign(w);return g.Return(null);}else{k("Login failed");return g.Return(null);}});}));},f.loginPiglet($.New(l,{Username:"",Password:""}))));},loginPiglet:function(D){return c.WithSubmit(m.op_LessMultiplyGreater(m.op_LessMultiplyGreater(c.Return(function(E){return function(F){return l.New(E,F);};}),n.Is(function(G){return n.NotEmpty(G);},"Please enter your username.",c.Yield(D.Username))),c.Yield(D.Password)));},loginRender:function(H,I,J){var M,P;M=p.add(s.input("text",function(N){return N;},function(O){return O;},I),r.ofArray([q.Attr().Class("form-control"),q.Attr().NewAttr("type","password"),t.Attr().NewAttr("placeholder","Password")]));P=function(){return function(R){return R.KeyCode===13?u("#submit-btn").click():null;};};v.Events().OnKeyDown(P,M);return p.add(q.Div(r.ofArray([q.Attr().Class("well"),q.Attr().NewAttr("id","login-form")])),r.ofArray([p.add(q.Div(r.ofArray([q.Attr().Class("form-group")])),r.ofArray([p.add(s.input("text",function(K){return K;},function(L){return L;},H),r.ofArray([q.Attr().Class("form-control"),q.Attr().NewAttr("type","text"),t.Attr().NewAttr("autofocus","autofocus"),t.Attr().NewAttr("required","required"),t.Attr().NewAttr("placeholder","Username"),q.Attr().NewAttr("id","name")]))])),p.add(q.Div(r.ofArray([q.Attr().Class("form-group")])),r.ofArray([M])),p.add(s.SubmitValidate(J),r.ofArray([q.Attr().Class("btn btn-primary"),q.Attr().NewAttr("id","submit-btn")]))]));}},Control:$.Class({get_Body:function(){return f.form(this.redirectUrl);}}),LoginInfo:$.Class({},{New:function(S,T){return $.New(l,{Username:S,Password:T});}})}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Piglets);c=$.Safe(b.Piglet1);d=$.Safe($$.Sitelet);e=$.Safe(d.Login);f=$.Safe(e.Client);g=$.Safe(a.Concurrency);h=$.Safe(a.JavaScript);i=$.Safe(a.Remoting);j=$.Safe($$.window);k=$.Safe($$.alert);l=$.Safe(e.LoginInfo);m=$.Safe(b.Pervasives);n=$.Safe(c.Validation);o=$.Safe(a.Html);p=$.Safe(o.Operators);q=$.Safe(o.Default);r=$.Safe(a.List);s=$.Safe(b.Controls);t=$.Safe(q.HTML5);u=$.Safe($$.jQuery);return v=$.Safe(o.EventsPervasives);});$.OnLoad(function(){return;});}());
