(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;$.Define($$,{Sitelet:{Login:{Client:{form:function(v){var w,x,y,K;w=(x=c.loginPiglet($.New(d,{Username:"",Password:""})),(y=function(z){return g.Run(function(A){var B,C,H;B=(C=function(){var E,F;E=h.Async("Sitelet:0",[A]);F=function(G){if(G.$==1){i.location.assign(v);return j.Return(null);}else{k("Login failed");return j.Return(null);}};return j.Bind(E,F);},j.Delay(C));H=function(I){var J;J={$:0};return j.Start(I);};return H(B);},z);},y(x)));K=function(L){return g.Render(function(M){return function(N){return function(O){return c.loginRender(M,N,O);};};},L);};return K(w);},loginPiglet:function(P){var Q,T,U,X,Y;Q=l.op_LessMultiplyGreater(l.op_LessMultiplyGreater(g.Return(function(R){return function(S){return d.New(R,S);};}),(T=g.Yield(P.Username),(U=function(V){return m.Is(function(W){return m.NotEmpty(W);},"Please enter your username.",V);},U(T)))),(X=g.Yield(P.Password),(Y=function(Z){return m.Is(function(_0){return m.NotEmpty(_0);},"Please enter your password.",Z);},Y(X))));return g.WithSubmit(Q);},loginRender:function(_1,_2,_3){var _4,_5,_6,_7,_,ba,bb,bc,bd,be,bg,bh,bi,bn;return o.add(p.Div(q.ofArray([p.Attr().Class("well"),(_4=p.Attr(),_4.NewAttr("id","login-form"))])),q.ofArray([o.add(p.Div(q.ofArray([p.Attr().Class("form-group")])),q.ofArray([(_5=q.ofArray([(_6=p.Attr(),_6.NewAttr("for","username")),p.Text("Username")]),(_7=p.Tags(),_7.NewTag("label",_5))),o.add(r.input("text",function(_8){return _8;},function(_9){return _9;},_1),q.ofArray([p.Attr().Class("form-control"),(_=p.Attr(),_.NewAttr("type","text")),(ba=s.Attr(),ba.NewAttr("autofocus","autofocus"))]))])),o.add(p.Div(q.ofArray([p.Attr().Class("form-group")])),q.ofArray([(bb=q.ofArray([(bc=p.Attr(),bc.NewAttr("for","password")),p.Text("Password")]),(bd=p.Tags(),bd.NewTag("label",bb))),(be=o.add(r.input("text",function(bf){return bf;},function(bf){return bf;},_2),q.ofArray([p.Attr().Class("form-control"),(bg=p.Attr(),bg.NewAttr("type","password"))])),(bh=(bi=function(){return function(bk){var bl;bl=bk.KeyCode;if(bl===13){return t("#submit-btn").click();}else{return null;}};},function(bm){return u.Events().OnKeyDown(bi,bm);}),(bh(be),be)))])),o.add(r.SubmitValidate(_3),q.ofArray([p.Attr().Class("btn btn-primary"),(bn=p.Attr(),bn.NewAttr("id","submit-btn"))]))]));}},Control:$.Class({get_Body:function(){return c.form(this.redirectUrl);}}),LoginInfo:$.Class({},{New:function(bo,bp){return $.New(d,{Username:bo,Password:bp});}})}}});$.OnInit(function(){a=$.Safe($$.Sitelet);b=$.Safe(a.Login);c=$.Safe(b.Client);d=$.Safe(b.LoginInfo);e=$.Safe($$.IntelliFactory.WebSharper);f=$.Safe(e.Piglets);g=$.Safe(f.Piglet1);h=$.Safe(e.Remoting);i=$.Safe($$.window);j=$.Safe(e.Concurrency);k=$.Safe($$.alert);l=$.Safe(f.Pervasives);m=$.Safe(g.Validation);n=$.Safe(e.Html);o=$.Safe(n.Operators);p=$.Safe(n.Default);q=$.Safe(e.List);r=$.Safe(f.Controls);s=$.Safe(p.HTML5);t=$.Safe($$.jQuery);return u=$.Safe(n.EventsPervasives);});$.OnLoad(function(){});}());
