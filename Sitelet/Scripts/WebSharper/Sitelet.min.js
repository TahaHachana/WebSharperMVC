(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;$.Define($$,{Sitelet:{Login:{Client:{form:function(v){return c.Render(function(w){return function(x){return function(y){return f.loginRender(w,x,y);};};},c.Run(function(z){return g.Start(g.Delay(function(){return g.Bind(h.Async("Sitelet:0",[z]),function(B){if(B.$==1){i.location.assign(v);return g.Return(null);}else{j("Login failed");return g.Return(null);}});}));},f.loginPiglet($.New(k,{Username:"",Password:""}))));},loginPiglet:function(C){return c.WithSubmit(l.op_LessMultiplyGreater(l.op_LessMultiplyGreater(c.Return(function(D){return function(E){return k.New(D,E);};}),m.Is(function(F){return m.NotEmpty(F);},"Please enter your username.",c.Yield(C.Username))),m.Is(function(G){return m.NotEmpty(G);},"Please enter your password.",c.Yield(C.Password))));},loginRender:function(H,I,J){var K,N,O,R;K=q.ofArray([p.Attr().NewAttr("for","username"),p.Text("Username")]);N=q.ofArray([p.Attr().NewAttr("for","password"),p.Text("Password")]);O=o.add(r.input("text",function(P){return P;},function(Q){return Q;},I),q.ofArray([p.Attr().Class("form-control"),p.Attr().NewAttr("type","password")]));R=function(){return function(T){return T.KeyCode===13?t("#submit-btn").click():null;};};u.Events().OnKeyDown(R,O);return o.add(p.Div(q.ofArray([p.Attr().Class("well"),p.Attr().NewAttr("id","login-form")])),q.ofArray([o.add(p.Div(q.ofArray([p.Attr().Class("form-group")])),q.ofArray([p.Tags().NewTag("label",K),o.add(r.input("text",function(L){return L;},function(M){return M;},H),q.ofArray([p.Attr().Class("form-control"),p.Attr().NewAttr("type","text"),s.Attr().NewAttr("autofocus","autofocus")]))])),o.add(p.Div(q.ofArray([p.Attr().Class("form-group")])),q.ofArray([p.Tags().NewTag("label",N),O])),o.add(r.SubmitValidate(J),q.ofArray([p.Attr().Class("btn btn-primary"),p.Attr().NewAttr("id","submit-btn")]))]));}},Control:$.Class({get_Body:function(){return f.form(this.redirectUrl);}}),LoginInfo:$.Class({},{New:function(U,V){return $.New(k,{Username:U,Password:V});}})}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Piglets);c=$.Safe(b.Piglet1);d=$.Safe($$.Sitelet);e=$.Safe(d.Login);f=$.Safe(e.Client);g=$.Safe(a.Concurrency);h=$.Safe(a.Remoting);i=$.Safe($$.window);j=$.Safe($$.alert);k=$.Safe(e.LoginInfo);l=$.Safe(b.Pervasives);m=$.Safe(c.Validation);n=$.Safe(a.Html);o=$.Safe(n.Operators);p=$.Safe(n.Default);q=$.Safe(a.List);r=$.Safe(b.Controls);s=$.Safe(p.HTML5);t=$.Safe($$.jQuery);return u=$.Safe(n.EventsPervasives);});$.OnLoad(function(){return;});}());
