(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R;$.Define($$,{IntelliFactory:{WebSharper:{Piglets:{Choose:{Stream:$.Class({Choice:function(S,T){var U,V,_0=this;U=g.New21();V={contents:false};this.subscriptions.contents=$.New(i,{$:1,$0:this.pStream.SubscribeImmediate(function(W){var X,Y,Z;if(W.$==0){X=W.$0[1];Y=W.$0[0];Z=U.ContainsKey(Y)?U.get_Item(Y):X.view.call(null,T);_0.out.Trigger(X.stream.get_Latest());if(V.contents){S.Remove(0);}V.contents=true;return S.Add(Z);}else{return null;}}),$1:_0.subscriptions.contents});return S.get_Container();},Chooser:function(_1){return this.chooser.view.call(null,_1);},Dispose:function(){var _2,_3,_5,_6;_2=this.subscriptions.contents;_3=j.Get(_2);$.While(function(){return _3.MoveNext();},function(){var _4;_4=_3.get_Current(),_4.Dispose();});_5=this.choiceSubscriptions;_6=function(_7){return k.iter(function(_8){var _9,_;_9=l.KeyValue(_8);_=_9[1][1];return _.Dispose();},_7);};return _6(_5);},Subscribe:function(ba){return this.out.Subscribe(ba);},get_ChooserStream:function(){return this.chooser.stream;},get_Latest:function(){return this.out.get_Latest();}},{New:function(ba,bb,bc){var bd;bd=$.New(this,e.New(bc.get_Id()));bd.chooser=ba;bd.out=bc;bd.pStream=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});bd.choiceSubscriptions=g.New21();bd.subscriptions={contents:h.ofArray([bd.chooser.stream.SubscribeImmediate(function(be){var bf,bg,bh,bn,bo;bf=(bg=(bh=function(bi){var bj,bk;return[bi,bd.choiceSubscriptions.ContainsKey(bi)?(bd.choiceSubscriptions.get_Item(bi))[0]:(bj=bb(bi),(bd.choiceSubscriptions.set_Item(bi,[bj,bj.stream.Subscribe((bk=bd.out,function(bl){return bk.Trigger(bl);}))]),bj))];},function(bm){return n.Map(bh,bm);}),bg(be));bn=(bo=bd.pStream,function(bp){return bo.Trigger(bp);});return bn(bf);})])};return bd;}})},ConcreteReader:$.Class({Subscribe:function(bq){return this.subscribe.call(null,bq);},get_Latest:function(){return this.latest.call(null,null);}},{New:function(br,bs){var bt;bt=$.New(this,e.New((p.next())(null)));bt.latest=br;bt.subscribe=bs;return bt;}}),ConcreteWriter:$.Class({Trigger:function(bu){return this.trigger.call(null,bu);}},{New:function(bv){return q.New1(function(bw){if(bw.$==1){return null;}else{return bv(bw.$0);}});},New1:function(bx){var by;by=$.New(this,{});by.trigger=bx;return by;}}),Controls:{Attr:function(bz,bA,bB,bC){var bD;bD=function(bE){return s.OnAfterRender(function(bF){var bG,bO,bP;bG=function(bH){var bI,bJ,bK,bL;if(bH.$==0){bI=bH.$0;bJ=bB(bI);bK=bF["HtmlProvider@32"];return((bL=bF.Body,function(bM){return function(bN){return bK.SetAttribute(bL,bM,bN);};})(bA))(bJ);}else{return null;}};bG(bz.get_Latest());bO=bz.Subscribe(bG);bP=function(bQ){bQ;};return bP(bO);},bE);};bD(bC);return bC;},AttrResult:function(bR,bS,bT,bU){var bV;bV=function(bW){return s.OnAfterRender(function(bX){var bY,b5,b6;bY=function(bZ){var b0,b1,b2;b0=bT(bZ);b1=bX["HtmlProvider@32"];return((b2=bX.Body,function(b3){return function(b4){return b1.SetAttribute(b2,b3,b4);};})(bS))(b0);};bY(bR.get_Latest());b5=bR.Subscribe(bY);b6=function(b7){b7;};return b6(b5);},bW);};bV(bU);return bU;},Button:function(b8){var b9,b_,b$;b9=t.Button($.New(i,{$:0}));b_=(b$=function(){return function(){return b8.Trigger($.New(n,{$:0,$0:null}));};},function(cc){return u.Events().OnClick(b$,cc);});b_(b9);return b9;},ButtonValidate:function(cd){var ce,cf,cg;ce=v.Button(cd);cf=(cg=cd.get_Input(),function(ch){return v.EnableOnSuccess(cg,ch);});return cf(ce);},CheckBox:function(ci){var cj,ck,cl,cm,cn,co,cp;cj=(v.nextId())(null);ck=t.Input(h.ofArray([(cl=t.Attr(),cl.NewAttr("type","checkbox")),(cm=t.Attr(),cm.NewAttr("id",cj))]));cn=ci.get_Latest();if(cn.$==0){co=cn.$0;ck.Body.checked=co;}cp=ci.Subscribe(function(cq){var cr;if(cq.$==1){return null;}else{cr=cq.$0;if(!w.Equals(ck.Body.checked,cr)){ck.Body.checked=cr;}else{return null;}}});cp;ck.Body.addEventListener("change",function(){return ci.Trigger($.New(n,{$:0,$0:ck.Body.checked}));},true);return ck;},Css:function(ct,cu,cv,cw){var cx;cx=function(cy){return s.OnAfterRender(function(cz){var cA,cI,cJ;cA=function(cB){var cC,cD,cE,cF;if(cB.$==0){cC=cB.$0;cD=cv(cC);cE=cz["HtmlProvider@32"];return((cF=cz.Body,function(cG){return function(cH){return cE.SetCss(cF,cG,cH);};})(cu))(cD);}else{return null;}};cA(ct.get_Latest());cI=ct.Subscribe(cA);cJ=function(cK){cK;};return cJ(cI);},cy);};cx(cw);return cw;},CssResult:function(cL,cM,cN,cO){var cP;cP=function(cQ){return s.OnAfterRender(function(cR){var cS,cZ,c0;cS=function(cT){var cU,cV,cW;cU=cN(cT);cV=cR["HtmlProvider@32"];return((cW=cR.Body,function(cX){return function(cY){return cV.SetCss(cW,cX,cY);};})(cM))(cU);};cS(cL.get_Latest());cZ=cL.Subscribe(cS);c0=function(c1){c1;};return c0(cZ);},cQ);};cP(cO);return cO;},EnableOnSuccess:function(c2,c3){var c4;c4=function(c5){return s.OnAfterRender(function(c6){var c7,c9;c6.Body.disabled=!c2.get_Latest().get_isSuccess();c7=c2.Subscribe(function(c8){c6.Body.disabled=!c8.get_isSuccess();});c9=function(c_){c_;};return c9(c7);},c5);};c4(c3);return c3;},HtmlContainer:$.Class({Add:function(c$){return this.container.AppendI(c$);},MoveUp:function(da){var db,dc,dd,de;db=this.container.Body.childNodes[da];dc=this.container.Body.childNodes[da-1];dd=this.container.Body.removeChild(db);dd;de=this.container.Body.insertBefore(db,dc);de;},Remove:function(df){var dg;dg=this.container.Body.removeChild(this.container.Body.childNodes[df]);dg;},get_Container:function(){return this.container;}},{New:function(dh){var di;di=$.New(this,{});di.container=dh;return di;}}),IntInput:function(dj){return v.input("number",function(dk){return dk<<0;},function(dl){return $$.String(dl);},dj);},Link:function(dm){var dn,_do,dp;dn=t.A(h.ofArray([(_do=t.Attr(),_do.NewAttr("href","#"))]));dp=function(dq){return s.OnAfterRender(function(dr){return x(dr.Body).on("click",function(){dm.Trigger($.New(n,{$:0,$0:null}));return false;});},dq);};dp(dn);return dn;},Radio:function(dt,du){var dv,dw,dx,dy,dz,dR,dT;dv=(v.nextId())(null);dw=h.ofSeq(du);dx=(dy=(dz=$.Tupled(function(dA){var dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dN,dO,dP;dB=dA[0];dC=dA[1];dD=(v.nextId())(null);dE=(dF=t.Input(h.ofArray([(dG=t.Attr(),dG.NewAttr("type","radio")),(dH=t.Attr(),dH.NewAttr("name",dv)),(dI=t.Attr(),dI.NewAttr("id",dD))])),(dJ=(dK=function(dL){if(dL.Body.checked){return dt.Trigger($.New(n,{$:0,$0:dB}));}else{return null;}},function(dM){return u.Events().OnChange(dK,dM);}),(dJ(dF),dF)));return[dE,t.Span(h.ofArray([dE,(dN=h.ofArray([(dO=t.Attr(),dO.NewAttr("for",dD)),t.Text(dC)]),(dP=t.Tags(),dP.NewTag("label",dN)))]))];}),function(dQ){return h.map(dz,dQ);}),dy(dw));dR=t.Div(k.map($.Tupled(function(dS){return dS[1];}),dx));dT=function(dU){return s.OnAfterRender(function(){var dW,d9,d_;dW=function(dX){var dY,dZ,d0;if(dX.$==1){return null;}else{dY=dX.$0;dZ=(d0=$.Tupled(function(d1){var d2,d3;d2=d1[0];d3=d1[1];return $.Tupled(function(d4){var d5,d6;d5=d4[0];d6=d4[1];d5.Body.checked=w.Equals(d2,dY);});}),function(d7){return function(d8){return h.iter2(d0,d7,d8);};});return(dZ(dw))(dx);}};dW(dt.get_Latest());d9=dt.Subscribe(dW);d_=function(d$){d$;};return d_(d9);},dU);};dT(dR);return dR;},RenderChoice:function(ea,eb,ec){return ea.Choice(y.New(ec),eb);},RenderMany:function(ed,ee,ef){return ed.Render(y.New(ef),ee);},Select:function(eg,eh){var ei,ej,ek,el,ev,ew,ex,ey,eB;(v.nextId())(null);ei=z.ofSeq(eh);ej=(ek=(el=$.Tupled(function(em){var en,eo,ep,eq,er,es;en=em[0];eo=em[1];ep=(v.nextId())(null);return s.add((eq=t.Tags(),(er=h.ofArray([(es=t.Attr(),es.NewAttr("value",ep))]),eq.NewTag("option",er))),h.ofArray([t.Text(eo)]));}),function(et){return et.map(function(eu){return el(eu);});}),ek(ei));ev=(ew=t.Select(ej),(ex=(ey=function(ez){if(ez.Body.selectedIndex>=0){return eg.Trigger($.New(n,{$:0,$0:ei[ez.Body.selectedIndex][0]}));}else{return null;}},function(eA){return u.Events().OnChange(ey,eA);}),(ex(ew),ew)));eB=function(eC){return s.OnAfterRender(function(){var eE,eR;eE=eg.SubscribeImmediate(function(eF){var eG,eH,eL,eM,eN,eO;if(eF.$==1){return null;}else{eG=eF.$0;eH=z.tryFindIndex($.Tupled(function(eI){var eJ,eK;eJ=eI[0];eK=eI[1];return w.Equals(eG,eJ);}),ei);if(eH.$==0){return null;}else{eL=eH.$0;eM=ej[eL];eN=eM["HtmlProvider@32"];return((eO=eM.Body,function(eP){return function(eQ){return eN.SetAttribute(eO,eP,eQ);};})("selected"))("");}}});eR=function(eS){eS;};return eR(eE);},eC);};eB(ev);return ev;},Show:function(eT,eU,eV){return v.ShowResult(eT,function(eW){var eX;if(eW.$==1){return k.empty();}else{eX=eW.$0;return eU(eX);}},eV);},ShowErrors:function(eY,eZ,e0){return v.ShowResult(eY,function(e1){var e2,e3,e4,e7;if(e1.$==1){e2=e1.$0;return eZ((e3=(e4=function(e5){return e5.get_Message();},function(e6){return h.map(e4,e6);}),e3(e2)));}else{e7=e1.$0;return k.empty();}},e0);},ShowResult:function(e8,e9,e_){var e$,fa,fb;e$=e9(e8.get_Latest());fa=j.Get(e$);$.While(function(){return fa.MoveNext();},function(){e_.AppendI(fa.get_Current());});fb=e8.Subscribe(function(fc){var fd,fe;e_["HtmlProvider@32"].Clear(e_.Body);fd=e9(fc);fe=j.Get(fd);$.While(function(){return fe.MoveNext();},function(){e_.AppendI(fe.get_Current());});});fb;return e_;},ShowString:function(ff,fg,fh){return v.Show(ff,function(fi){return h.ofArray([t.Text(fg(fi))]);},fh);},Submit:function(fj){var fk,fl,fm,fn;fk=t.Input(h.ofArray([(fl=t.Attr(),fl.NewAttr("type","submit"))]));fm=(fn=function(){return function(){return fj.Trigger($.New(n,{$:0,$0:null}));};},function(fq){return u.Events().OnClick(fn,fq);});fm(fk);return fk;},SubmitValidate:function(fr){var fs,ft,fu;fs=v.Submit(fr);ft=(fu=fr.get_Input(),function(fv){return v.EnableOnSuccess(fu,fv);});return ft(fs);},TextArea:function(fw){var fx,fy,fz,fC;fx=t.TextArea($.New(i,{$:0}));fy=fw.get_Latest();if(fy.$==0){fx.set_Value(fy.$0);}fz=fw.Subscribe(function(fA){var fB;if(fA.$==1){return null;}else{fB=fA.$0;if(fx.get_Value()!==fB){return fx.set_Value(fB);}else{return null;}}});fz;fC=function(){return fw.Trigger($.New(n,{$:0,$0:fx.get_Value()}));};fx.Body.addEventListener("keyup",fC,true);fx.Body.addEventListener("change",fC,true);return fx;},WithLabel:function(fE,fF){var fG,fH,fI,fJ,fK;fG=(v.nextId())(null);return t.Span(h.ofArray([(fH=h.ofArray([(fI=t.Attr(),fI.NewAttr("for",fG)),t.Text(fE)]),(fJ=t.Tags(),fJ.NewTag("label",fH))),s.add(fF,h.ofArray([(fK=t.Attr(),fK.NewAttr("id",fG))]))]));},WithLabelAfter:function(fL,fM){var fN,fO,fP,fQ,fR;fN=(v.nextId())(null);return t.Span(h.ofArray([s.add(fM,h.ofArray([(fO=t.Attr(),fO.NewAttr("id",fN))])),(fP=h.ofArray([(fQ=t.Attr(),fQ.NewAttr("for",fN)),t.Text(fL)]),(fR=t.Tags(),fR.NewTag("label",fP)))]));},input:function(fS,fT,fU,fV){var fW,fX,fY,fZ,f0,f4;fW=t.Input(h.ofArray([(fX=t.Attr(),fX.NewAttr("type",fS))]));fY=fV.get_Latest();if(fY.$==0){fZ=fY.$0;fW.set_Value(fU(fZ));}f0=fV.Subscribe(function(f1){var f2,f3;if(f1.$==1){return null;}else{f2=f1.$0;f3=fU(f2);if(fW.get_Value()!==f3){return fW.set_Value(f3);}else{return null;}}});f0;f4=function(){return fV.Trigger($.New(n,{$:0,$0:fT(fW.get_Value())}));};fW.Body.addEventListener("keyup",f4,true);fW.Body.addEventListener("change",f4,true);return fW;},nextId:$.Field(function(){var f6;f6={contents:0};return function(){l.Increment(f6);return"pl__"+$$.String(f6.contents);};})},ErrorMessage:$.Class({get_Message:function(){return this.message;},get_Source:function(){return this.source;}},{Create:function(f8,f9){return A.New(f8,f9.get_Id());},New:function(f_,f$){var ga;ga=$.New(this,{});ga.message=f_;ga.source=f$;return ga;}}),Id:{next:$.Field(function(){var gb;gb={contents:0};return function(){l.Increment(gb);return gb.contents;};})},Many:{Operations:$.Class({get_Delete:function(){return q.New(this["delete"]);},get_MoveDown:function(){return this.moveDown;},get_MoveUp:function(){return this.moveUp;}},{New:function(gd,ge,gf){var gg;gg=$.New(this,{});gg["delete"]=gd;gg.moveUp=ge;gg.moveDown=gf;return gg;}}),Stream:$.Class({AddRender:function(gh){return this.adder.view.call(null,gh);},Render:function(gi,gj){var gk,gn=this,gR,gS,gU;gk=function(gl){var gm,go,gq,gw,gz,gB,gD,gF,gG,gH,gJ,gK,gL,gM,gO;gm=gn.p.call(null,gl);gn.streams.Add(gm.stream);go=gm.stream.SubscribeImmediate(function(){return gn.update();});go;gq=function(){var gs,gt;gs=gn.streams;gt=function(gu){return k.findIndex(function(gv){return gv.get_Id()===gm.stream.get_Id();},gu);};return gt(gs);};gw=function(gx){var gy;if(gx>0?gx<gn.streams.get_Count():false){gy=gn.streams.get_Item(gx);gn.streams.set_Item(gx,gn.streams.get_Item(gx-1));gn.streams.set_Item(gx-1,gy);gi.MoveUp(gx);return gn.update();}else{return null;}};gz=function(){return gw(gq(null));};gB=function(){if(gq(null)>0){return $.New(n,{$:0,$0:null});}else{return $.New(n,{$:1,$0:$.New(i,{$:0})});}};gD=function(){if(gq(null)<gn.streams.get_Count()-1){return $.New(n,{$:0,$0:null});}else{return $.New(n,{$:1,$0:$.New(i,{$:0})});}};gF=m.New(gB(null),{$:0});gG=m.New(gD(null),{$:0});gH=gn.out.Subscribe(function(){gF.Trigger(gB(null));return gG.Trigger(gD(null));});gJ=D.New(gF,false);gK=D.New(gG,false);gL=gJ.Subscribe(n.Iter(gz));gM=gK.Subscribe(n.Iter(function(){return gw(gq(null)+1);}));gO=function(){var gQ;gQ=gq(null);gn.streams.RemoveAt(gQ);gi.Remove(gQ);gH.Dispose();gL.Dispose();gM.Dispose();return gn.update();};return gi.Add(gm.view.call(null,gj(E.New(gO,gJ,gK))));};gR=gn.out.get_Latest();if(gR.$==0){gS=gR.$0;gS.forEach(function(gT){gk(gT);});}gU=gn.adder.stream.Subscribe(function(gV){if(gV.$==0){return gk(gV.$0);}else{return null;}});gU;return gi.get_Container();},Subscribe:function(gW){return this.out.Subscribe(gW);},get_Add:function(){return this.adder.stream;},get_Latest:function(){return this.out.get_Latest();},update:function(){var gX,gY,g8,g9,g_,hd,he;gX=(gY=k.fold(function(gZ){return function(g0){var g1,g2,g3,g4,g5,g6,g7;g1=[gZ,g0.get_Latest()];if(g1[0].$==1){if(g1[1].$==1){g2=g1[0].$0;g3=g1[1].$0;return $.New(n,{$:1,$0:h.append(g3,g2)});}else{g4=g1[0].$0;return $.New(n,{$:1,$0:g4});}}else{if(g1[1].$==1){g5=g1[1].$0;return $.New(n,{$:1,$0:g5});}else{g6=g1[0].$0;g7=g1[1].$0;return $.New(n,{$:0,$0:$.New(i,{$:1,$0:g7,$1:g6})});}}};},$.New(n,{$:0,$0:$.New(i,{$:0})}),this.streams),(g8=(g9=(g_=function(g$){return z.ofSeq(g$);},function(ha){return g_(function(hb){return h.rev(hb);}(ha));}),function(hc){return n.Map(g9,hc);}),g8(gY)));hd=(he=this.out,function(hf){return he.Trigger(hf);});return hd(gX);}},{New:function(hg,hh,hi){var hj;hj=$.New(this,e.New(hh.get_Id()));hj.p=hg;hj.out=hh;hj.adder=hi;hj.streams=G.New2();return hj;}}),UnitStream:$.Class({get_Add:function(){return this.submitStream;}},{New:function(hk,hl,hm,hn){var ho,hp,hq,hr,ht;ho=$.New(this,C.New(hk,hl,hm));ho.submitStream=(hp=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0}),(hq=(hr=hm.get_Stream(),function(hs){return hr.Trigger(hs);}),(ht=hp.Subscribe(function(hu){var hv;if(hu.$==0){return hq($.New(n,{$:0,$0:hn}));}else{hv=hu.$0;return hq($.New(n,{$:1,$0:hv}));}}),ht,hp)));return ho;}})},Pervasives:{op_LessMultiplyGreater:function(hw,hx){var hy,hz;return $.New(I,{stream:J.Ap(hw.stream,hx.stream),view:(hy=hw.view,(hz=hx.view,function(hA){return hz(hy(hA));}))});},op_LessMultiplyQmarkGreater:function(hB,hC){var hD,hE;return $.New(I,{stream:J.ApJoin(hB.stream,hC.stream),view:(hD=hB.view,(hE=hC.view,function(hF){return hE(hD(hF));}))});}},Piglet:$.Class({get_Stream:function(){return this.stream;}}),Piglet1:{Builder:$.Class({Bind:function(hG,hH){return K.Choose(hG,hH);},Return:function(hI){return K.Return(hI);},ReturnFrom:function(hJ){return hJ;},Yield:function(hK){return K.Yield(hK);},YieldFrom:function(hL){return hL;},Zero:function(){return K.ReturnFailure();}}),Choose:function(hM,hN){var hO,hP;hO=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});hP=d.New(hM,hN,hO);return $.New(I,{stream:hO,view:function(hQ){return hQ(hP);}});},Confirm:function(hR,hS,hT){var hU,hV,hW,hX,h0,h1,h5,h6,h8,h9,ia;hU=K.Yield(hR);hV=(hW=(hX=L.op_LessMultiplyGreater(L.op_LessMultiplyGreater(K.Return(function(hY){return function(hZ){return[hY,hZ];};}),hS(K.Yield(hR))),hU),(h0=(h1=$.Tupled(function(h2){var h3,h4;h3=h2[0];h4=h2[1];return w.Equals(h3,h4);}),(h5=(h6=hU.get_Stream(),A.Create(hT,h6)),function(h7){return M["Is'"](h1,h5,h7);})),h0(hX))),(h8=(h9=$.Tupled(function(h_){return h_[0];}),function(h$){return K.Map(h9,h$);}),h8(hW)));ia=function(ib){return K.MapViewArgs(function(ic){return function(id){return[ic,id];};},ib);};return ia(hV);},FlushErrors:function(ie){return K.MapResult(function(_if){if(_if.$==1){return $.New(n,{$:1,$0:$.New(i,{$:0})});}else{return _if;}},ie);},Many:function(ig,ih){return K.ManyInit([ig],ig,ih);},ManyInit:function(ii,ij,ik){var il,im,_in;il=m.New($.New(n,{$:0,$0:ii}),{$:0});im=ik(ij);_in=H.New(ik,il,im,ij);return $.New(I,{stream:il,view:function(io){return io(_in);}});},ManyPiglet:function(ip,iq,ir){var is,it;is=m.New($.New(n,{$:0,$0:ip}),{$:0});it=C.New(ir,is,iq);return $.New(I,{stream:is,view:function(iu){return iu(it);}});},Map:function(iv,iw){var ix,iy;ix=(iy=function(iz){var iA,iB;if(iz.$==0){iA=iz.$0;return $.New(n,{$:0,$0:iv(iA)});}else{iB=iz.$0;return $.New(n,{$:1,$0:iB});}},function(iC){return K.MapResult(iy,iC);});return ix(iw);},MapAsync:function(iD,iE){var iF,iG;iF=(iG=function(iH){var iI,iJ,iP,iQ;if(iH.$==0){iI=iH.$0;iJ=function(){var iL,iM;iL=iD(iI);iM=function(iN){var iO;iO=$.New(n,{$:0,$0:iN});return N.Return(iO);};return N.Bind(iL,iM);};return N.Delay(iJ);}else{iP=iH.$0;iQ=$.New(n,{$:1,$0:iP});return N.Return(iQ);}},function(iR){return K.MapAsyncResult(iG,iR);});return iF(iE);},MapAsyncResult:function(iS,iT){var iU,iV,i5,i6,ja;iU=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});iV=iT.stream.Subscribe(function(iW){var iX,iY,i4;iX=N.Delay((iY=function(){var i0,i1;i0=iS(iW);i1=function(i2){var i3;i3=iU.Trigger(i2);return N.Return(i3);};return N.Bind(i0,i1);},iY));i4={$:0};return N.Start(iX);});iV;i5=N.Delay((i6=function(){var i8,i9;i8=iS(iT.stream.get_Latest());i9=function(i_){var i$;i$=iU.Trigger(i_);return N.Return(i$);};return N.Bind(i8,i9);},i6));ja={$:0};N.Start(i5);return $.New(I,{stream:iU,view:iT.view});},MapResult:function(jb,jc){var jd,je;jd=m.New(jb(jc.stream.get_Latest()),{$:0});je=jc.stream.Subscribe(function(jf){var jg;jg=jb(jf);return jd.Trigger(jg);});je;return $.New(I,{stream:jd,view:jc.view});},MapToAsyncResult:function(jh,ji){var jj,jk;jj=(jk=function(jl){var jm,jn,jo;if(jl.$==0){jm=jl.$0;return jh(jm);}else{jn=jl.$0;jo=$.New(n,{$:1,$0:jn});return N.Return(jo);}},function(jp){return K.MapAsyncResult(jk,jp);});return jj(ji);},MapToResult:function(jq,jr){var js,jt;js=(jt=function(ju){var jv,jw;if(ju.$==0){jv=ju.$0;return jq(jv);}else{jw=ju.$0;return $.New(n,{$:1,$0:jw});}},function(jx){return K.MapResult(jt,jx);});return js(jr);},MapViewArgs:function(jy,jz){var jA;return $.New(I,{stream:jz.stream,view:(jA=jz.view,function(jB){return jB(jA(jy));})});},Render:function(jC,jD){return jD.view.call(null,jC);},Return:function(jE){return $.New(I,{stream:m.New($.New(n,{$:0,$0:jE}),{$:0}),view:function(jF){return jF;}});},ReturnFailure:function(){return $.New(I,{stream:m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0}),view:function(jG){return jG;}});},Run:function(jH,jI){return K.RunResult(n.Iter(jH),jI);},RunResult:function(jJ,jK){var jL;jL=jK.stream.Subscribe(jJ);jL;return jK;},TransmitReader:function(jM){var jN,jO;return $.New(I,{stream:jM.stream,view:(jN=jM.view,(jO=jM.stream,function(jP){return(jN(jP))(jO);}))});},TransmitReaderMap:function(jQ,jR){var jS,jT,jU;return $.New(I,{stream:jR.stream,view:(jS=jR.view,(jT=(jU=jR.stream,e.Map(jQ,jU)),function(jV){return(jS(jV))(jT);}))});},TransmitReaderMapResult:function(jW,jX){var jY,jZ,j0;return $.New(I,{stream:jX.stream,view:(jY=jX.view,(jZ=(j0=jX.stream,e.MapResult(jW,j0)),function(j1){return(jY(j1))(jZ);}))});},TransmitReaderMapToResult:function(j2,j3){var j4,j5,j6;return $.New(I,{stream:j3.stream,view:(j4=j3.view,(j5=(j6=j3.stream,e.MapToResult(j2,j6)),function(j7){return(j4(j7))(j5);}))});},TransmitStream:function(j8){var j9,j_;return $.New(I,{stream:j8.stream,view:(j9=j8.view,(j_=j8.stream,function(j$){return(j9(j$))(j_);}))});},TransmitWriter:function(ka){var kb,kc;return $.New(I,{stream:ka.stream,view:(kb=ka.view,(kc=ka.stream,function(kd){return(kb(kd))(kc);}))});},Validation:{Is:function(ke,kf,kg){var kh,ki;kh=m.New(kg.stream.get_Latest(),{$:1,$0:kg.stream.get_Id()});ki=kg.stream.Subscribe(function(kj){var kk,kl;if(kj.$==0){if(ke(kj.$0)){kk=kj.$0;return kh.Trigger($.New(n,{$:0,$0:kk}));}else{return kh.Trigger($.New(n,{$:1,$0:h.ofArray([A.New(kf,kh.get_Id())])}));}}else{kl=kj.$0;return kh.Trigger($.New(n,{$:1,$0:kl}));}});ki;return $.New(I,{stream:kh,view:kg.view});},"Is'":function(km,kn,ko){var kp,kq;kp=m.New(ko.stream.get_Latest(),{$:1,$0:ko.stream.get_Id()});kq=ko.stream.Subscribe(function(kr){var ks,kt;if(kr.$==0){if(km(kr.$0)){ks=kr.$0;return kp.Trigger($.New(n,{$:0,$0:ks}));}else{return kp.Trigger($.New(n,{$:1,$0:h.ofArray([kn])}));}}else{kt=kr.$0;return kp.Trigger($.New(n,{$:1,$0:kt}));}});kq;return $.New(I,{stream:kp,view:ko.view});},Match:function(ku){var kv;kv=new O(ku);return function(kw){return kv.test(kw);};},NotEmpty:function(kx){return kx!=="";}},WithSubmit:function(ky){var kz,kA;kz=D.New(ky.stream,false);return $.New(I,{stream:kz.get_Output(),view:(kA=ky.view,function(kB){return(kA(kB))(kz);})});},WithSubmitClearError:function(kC){var kD,kE;kD=D.New(kC.stream,true);return $.New(I,{stream:kD.get_Output(),view:(kE=kC.view,function(kF){return(kE(kF))(kD);})});},Yield:function(kG){var kH;kH=m.New($.New(n,{$:0,$0:kG}),{$:0});return $.New(I,{stream:kH,view:function(kI){return kI(kH);}});},YieldFailure:function(){var kJ;kJ=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});return $.New(I,{stream:kJ,view:function(kK){return kK(kJ);}});},YieldOption:function(kL,kM){var kN,kO,kP,kQ;kN=K.Yield(kL);kO=(kP=(kQ=function(kR){if(w.Equals(kR,kM)){return{$:0};}else{return{$:1,$0:kR};}},function(kS){return J.Map(function(kT){var kU;if(kT.$==1){kU=kT.$0;return kU;}else{return kM;}},kQ,kS);}),function(kV){return K.MapViewArgs(kP,kV);});return kO(kN);}},Reader:$.Class({SubscribeImmediate:function(kW){kW(this.get_Latest());return this.Subscribe(kW);},Through:function(kX){var kY,kZ,k3=this;kY=m.New(this.get_Latest(),{$:0});kZ=kX.Subscribe(function(k0){var k1,k2,k4,k5,k8,k9,k_;if(k0.$==1){k1=k0.$0;k2=[k3.get_Latest(),(k4=(k5=function(k6){return k6.get_Source()===k3.get_Id();},function(k7){return h.filter(k5,k7);}),k4(k1))];if(k2[1].$==0){return kY.Trigger(k3.get_Latest());}else{if(k2[0].$==1){k8=k2[1];k9=k2[0].$0;return kY.Trigger($.New(n,{$:1,$0:h.append(k9,k8)}));}else{k2[0].$0;k_=k2[1];return kY.Trigger($.New(n,{$:1,$0:k_}));}}}else{return kY.Trigger(k3.get_Latest());}});kZ;return kY;},get_Id:function(){return this.id;}},{Map:function(k$,la){return e.MapResult(function(lb){return n.Map(k$,lb);},la);},Map2:function(lc,ld,le){return function(lf){return e.MapResult2(function(lg){return function(lh){return function(li){return n.Map2(lc,lg,li);}(lh);};},ld,lf);}(le);},MapResult:function(lj,lk){var ll,lm;ll=m.New(lj(lk.get_Latest()),{$:0});lm=lk.Subscribe(function(ln){var lo;lo=lj(ln);return ll.Trigger(lo);});lm;return ll;},MapResult2:function(lp,lq,lr){var ls,lt,lv;ls=m.New((lp(lq.get_Latest()))(lr.get_Latest()),{$:0});lt=lq.Subscribe(function(lu){return ls.Trigger((lp(lu))(lr.get_Latest()));});lt;lv=lr.Subscribe(function(lw){return ls.Trigger((lp(lq.get_Latest()))(lw));});lv;return ls;},MapToResult:function(lx,ly){return e.MapResult(n.Bind(lx),ly);},New:function(lz){var lA;lA=$.New(this,{});lA.id=lz;return lA;}}),Result:$.Class({get_isSuccess:function(){if(this.$==1){return false;}else{return true;}}},{Ap:function(lB,lC){var lD,lE,lF,lG,lH,lI,lJ;lD=[lB,lC];if(lD[0].$==1){if(lD[1].$==1){lE=lD[0].$0;lF=lD[1].$0;return $.New(n,{$:1,$0:h.append(lE,lF)});}else{lG=lD[0].$0;return $.New(n,{$:1,$0:lG});}}else{if(lD[1].$==1){lH=lD[1].$0;return $.New(n,{$:1,$0:lH});}else{lI=lD[0].$0;lJ=lD[1].$0;return $.New(n,{$:0,$0:lI(lJ)});}}},Bind:function(lK){return function(lL){var lM;if(lL.$==1){lM=lL.$0;return $.New(n,{$:1,$0:lM});}else{return lK(lL.$0);}};},Failwith:function(lN){return $.New(n,{$:1,$0:h.ofArray([A.New(lN,0)])});},Iter:function(lO){return function(lP){if(lP.$==1){return null;}else{return lO(lP.$0);}};},Join:function(lQ){var lR,lS,lT;if(lQ.$==0){if(lQ.$0.$==0){lR=lQ.$0.$0;return $.New(n,{$:0,$0:lR});}else{lS=lQ.$0.$0;return $.New(n,{$:1,$0:lS});}}else{lT=lQ.$0;return $.New(n,{$:1,$0:lT});}},Map:function(lU,lV){var lW,lX;if(lV.$==1){lW=lV.$0;return $.New(n,{$:1,$0:lW});}else{lX=lV.$0;return $.New(n,{$:0,$0:lU(lX)});}},Map2:function(lY,lZ,l0){var l1,l2,l3,l4,l5,l6,l7;l1=[lZ,l0];if(l1[0].$==1){if(l1[1].$==1){l2=l1[0].$0;l3=l1[1].$0;return $.New(n,{$:1,$0:h.append(l2,l3)});}else{l4=l1[0].$0;return $.New(n,{$:1,$0:l4});}}else{if(l1[1].$==1){l5=l1[1].$0;return $.New(n,{$:1,$0:l5});}else{l6=l1[0].$0;l7=l1[1].$0;return $.New(n,{$:0,$0:(lY(l6))(l7)});}}}}),Stream:$.Class({Subscribe:function(l8){return P.subscribeTo(this.s,l8);},Trigger:function(l9){return this.s.Trigger(l9);},Trigger1:function(l_){return this.Trigger(l_);},Write:function(l$){var mb=this;return q.New1(function(ma){var mc;if(ma.$==0){return mb.Trigger($.New(n,{$:0,$0:l$}));}else{mc=ma.$0;return mb.Trigger($.New(n,{$:1,$0:mc}));}});},get_Latest:function(){return this.s.Latest.contents.$0;}},{New:function(md,me){var mf,mg;mf=$.New(this,e.New(me.$==0?(p.next())(null):(mg=me.$0,mg)));mf.s=R.New(md);return mf;}}),Stream1:{Ap:function(mh,mi){var mj,mk,mm;mj=m.New(n.Ap(mh.get_Latest(),mi.get_Latest()),{$:0});mk=mh.Subscribe(function(ml){return mj.Trigger(n.Ap(ml,mi.get_Latest()));});mk;mm=mi.Subscribe(function(mn){return mj.Trigger(n.Ap(mh.get_Latest(),mn));});mm;return mj;},ApJoin:function(mo,mp){var mq,mr,mt;mq=m.New(n.Ap(mo.get_Latest(),n.Join(mp.get_Latest())),{$:0});mr=mo.Subscribe(function(ms){return mq.Trigger(n.Ap(ms,n.Join(mp.get_Latest())));});mr;mt=mp.Subscribe(function(mu){return mq.Trigger(n.Ap(mo.get_Latest(),n.Join(mu)));});mt;return mq;},Map:function(mv,mw,mx){var my,mz,mA,mB,mC,mE;my=m.New((mz=mx.get_Latest(),n.Map(mv,mz)),{$:1,$0:mx.get_Id()});mA={contents:mx.get_Latest()};mB={contents:my.get_Latest()};mC=mx.Subscribe(function(mD){if(mA.contents!==mD){mB.contents=n.Map(mv,mD);return my.Trigger(mB.contents);}else{return null;}});mC;mE=my.Subscribe(function(mF){if(mB.contents!==mF){mA.contents=n.Map(mw,mF);return mx.Trigger(mA.contents);}else{return null;}});mE;return my;}},Submitter:$.Class({Subscribe:function(mG){return this.output.Subscribe(mG);},Trigger:function(){return this.writer.Trigger($.New(n,{$:0,$0:null}));},Trigger1:function(mH){return this.writer.Trigger(mH);},get_Input:function(){return this.input;},get_Latest:function(){return this.output.get_Latest();},get_Output:function(){return this.output;}},{New:function(mI,mJ){var mK,mS;mK=$.New(this,e.New((p.next())(null)));mK.input=mI;mK.output=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});mK.writer=q.New1(function(mL){var mM,mN,mO,mP,mQ,mR;mM=[mL,mK.input.get_Latest()];if(mM[0].$==0){if(mM[1].$==0){mN=mM[1].$0;return mK.output.Trigger($.New(n,{$:0,$0:mN}));}else{mO=mM[1].$0;return mK.output.Trigger($.New(n,{$:1,$0:mO}));}}else{if(mM[1].$==0){mP=mM[0].$0;return mK.output.Trigger($.New(n,{$:1,$0:mP}));}else{mQ=mM[0].$0;mR=mM[1].$0;return mK.output.Trigger($.New(n,{$:1,$0:h.append(mQ,mR)}));}}});if(mJ){mS=mK.input.Subscribe(function(){return mK.output.Trigger($.New(n,{$:1,$0:$.New(i,{$:0})}));});mS;}return mK;}})}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Piglets);c=$.Safe(b.Choose);d=$.Safe(c.Stream);e=$.Safe(b.Reader);f=$.Safe(a.Collections);g=$.Safe(f.Dictionary);h=$.Safe(a.List);i=$.Safe(h.T);j=$.Safe(a.Enumerator);k=$.Safe(a.Seq);l=$.Safe(a.Operators);m=$.Safe(b.Stream);n=$.Safe(b.Result);o=$.Safe(b.ConcreteReader);p=$.Safe(b.Id);q=$.Safe(b.ConcreteWriter);r=$.Safe(a.Html);s=$.Safe(r.Operators);t=$.Safe(r.Default);u=$.Safe(r.EventsPervasives);v=$.Safe(b.Controls);w=$.Safe(a.Unchecked);x=$.Safe($$.jQuery);y=$.Safe(v.HtmlContainer);z=$.Safe(a.Arrays);A=$.Safe(b.ErrorMessage);B=$.Safe(b.Many);C=$.Safe(B.Stream);D=$.Safe(b.Submitter);E=$.Safe(B.Operations);F=$.Safe(f.ResizeArray);G=$.Safe(F.ResizeArrayProxy);H=$.Safe(B.UnitStream);I=$.Safe(b.Piglet);J=$.Safe(b.Stream1);K=$.Safe(b.Piglet1);L=$.Safe(b.Pervasives);M=$.Safe(K.Validation);N=$.Safe(a.Concurrency);O=$.Safe($$.RegExp);P=$.Safe(a.Util);Q=$.Safe($$.IntelliFactory.Reactive);return R=$.Safe(Q.HotStream);});$.OnLoad(function(){$.Inherit(d,e);$.Inherit(o,e);$.Inherit(C,e);$.Inherit(C,e);$.Inherit(H,C);$.Inherit(m,e);$.Inherit(D,e);p.next();v.nextId();});}());
