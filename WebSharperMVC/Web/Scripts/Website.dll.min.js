(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;$.Define($$,{Website:{Login:{Client:{loginForm:function(p){var q,r,s,t,u,v,w,x,y,L,M,N,O,P,Q,R,S,T,U,V;q=c.Input(d.ofArray([(r=c.Attr(),r.NewAttr("type","text")),(s=e.Attr(),s.NewAttr("autofocus","autofocus")),c.Attr().Class("form-control"),(t=c.Attr(),t.NewAttr("id","username"))]));u=(v=f.add(c.Button(d.ofArray([(w=c.Attr(),w.NewAttr("type","button")),c.Attr().Class("btn btn-primary btn-block"),c.Id("login-btn")])),d.ofArray([c.Text("Submit")])),(x=(y=function(){return function(){var B,C,H;B=(C=function(){var E,F;E=g.Async("Website:0",[{Name:q.get_Value(),Password:j.passInput().get_Value()}]);F=function(G){if(G.$==1){k.location.assign(p);return l.Return(null);}else{m("Login failed");return l.Return(null);}};return l.Bind(E,F);},l.Delay(C));H=function(I){var J;J={$:0};return l.Start(I);};return H(B);};},function(K){return n.Events().OnClick(y,K);}),(x(v),v)));return f.add(c.Form(d.ofArray([c.Attr().NewAttr("role","form"),(L=c.Attr(),L.NewAttr("id","signin"))])),d.ofArray([c.H2(d.ofArray([c.Text("Please sign in")])),f.add((M=d.ofArray([c.Attr().Class("form-group")]),(N=c.Tags(),N.NewTag("fieldset",M))),d.ofArray([(O=d.ofArray([c.Text("Username"),(P=c.Attr(),P.NewAttr("for","username"))]),(Q=c.Tags(),Q.NewTag("label",O))),q,(R=d.ofArray([c.Text("Password"),(S=c.Attr(),S.NewAttr("for","password"))]),(T=c.Tags(),T.NewTag("label",R))),j.passInput()])),(U=d.ofArray([u]),(V=c.Tags(),V.NewTag("fieldset",U)))]));},passInput:$.Field(function(){var W,X,Y,Z,_0;W=c.Input(d.ofArray([(X=c.Attr(),X.NewAttr("type","password")),c.Attr().Class("form-control"),(Y=c.Attr(),Y.NewAttr("id","password"))]));Z=(_0=function(){return function(_2){var _3;_3=_2.KeyCode;if(_3===13){return o("#login-btn").click();}else{return null;}};},function(_4){return n.Events().OnKeyDown(_0,_4);});Z(W);return W;})},Control:$.Class({get_Body:function(){return j.loginForm(this.redirectUrl);}})}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Html);c=$.Safe(b.Default);d=$.Safe(a.List);e=$.Safe(c.HTML5);f=$.Safe(b.Operators);g=$.Safe(a.Remoting);h=$.Safe($$.Website);i=$.Safe(h.Login);j=$.Safe(i.Client);k=$.Safe($$.window);l=$.Safe(a.Concurrency);m=$.Safe($$.alert);n=$.Safe(b.EventsPervasives);return o=$.Safe($$.jQuery);});$.OnLoad(function(){j.passInput();});}());
