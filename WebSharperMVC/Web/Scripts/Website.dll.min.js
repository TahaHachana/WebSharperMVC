(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;$.Define($$,{Website:{Login:{Client:{loginForm:function(p){var q,r,s,t,u,v,w,x,y,z,A,B,P,Q,R,S,T,U,V,W,X,Y,Z;q=c.Input(d.ofArray([c.Attr().Class("form-control"),(r=c.Attr(),r.NewAttr("id","username")),(s=c.Attr(),s.NewAttr("type","text")),(t=e.Attr(),t.NewAttr("autofocus","autofocus"))]));u=(v=(w=c.Button(d.ofArray([c.Attr().Class("btn btn-primary btn-block"),(x=c.Attr(),x.NewAttr("id","login-btn")),(y=c.Attr(),y.NewAttr("type","button"))])),(z=c.Text("Submit"),f.add(w,d.ofArray([z])))),(A=(B=function(){return function(){var E,F,L;E=(F=function(){var H,I,J;H={Name:q.get_Value(),Password:i.passInput().get_Value()};I=j.Async("Website:0",[H]);J=function(K){if(K.$==1){k.location.assign(p);return l.Return(null);}else{m("Login failed");return l.Return(null);}};return l.Bind(I,J);},l.Delay(F));L=function(M){var N;N={$:0};return l.Start(M);};return L(E);};},function(O){return n.Events().OnClick(B,O);}),(A(v),v)));return f.add(c.Form(d.ofArray([c.Attr().NewAttr("role","form"),(P=c.Attr(),P.NewAttr("id","signin"))])),d.ofArray([c.H2(d.ofArray([c.Text("Please sign in")])),f.add((Q=d.ofArray([c.Attr().Class("form-group")]),(R=c.Tags(),R.NewTag("fieldset",Q))),d.ofArray([(S=d.ofArray([c.Text("Username"),(T=c.Attr(),T.NewAttr("for","username"))]),(U=c.Tags(),U.NewTag("label",S))),q,(V=d.ofArray([c.Text("Password"),(W=c.Attr(),W.NewAttr("for","password"))]),(X=c.Tags(),X.NewTag("label",V))),i.passInput()])),(Y=d.ofArray([u]),(Z=c.Tags(),Z.NewTag("fieldset",Y)))]));},passInput:$.Field(function(){var _0,_1,_2,_3,_4;_0=c.Input(d.ofArray([c.Attr().Class("form-control"),(_1=c.Attr(),_1.NewAttr("id","password")),(_2=c.Attr(),_2.NewAttr("type","password"))]));_3=(_4=function(){return function(_6){var _7;_7=_6.KeyCode;if(_7===13){return o("#login-btn").click();}else{return null;}};},function(_8){return n.Events().OnKeyDown(_4,_8);});_3(_0);return _0;})},Control:$.Class({get_Body:function(){return i.loginForm(this.redirectUrl);}})}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Html);c=$.Safe(b.Default);d=$.Safe(a.List);e=$.Safe(c.HTML5);f=$.Safe(b.Operators);g=$.Safe($$.Website);h=$.Safe(g.Login);i=$.Safe(h.Client);j=$.Safe(a.Remoting);k=$.Safe($$.window);l=$.Safe(a.Concurrency);m=$.Safe($$.alert);n=$.Safe(b.EventsPervasives);return o=$.Safe($$.jQuery);});$.OnLoad(function(){i.passInput();});}());
